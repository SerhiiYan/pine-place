---
import { Icon } from 'astro-icon/components';

// Получаем 'conditions' из props
const { conditions } = Astro.props;

// --- УЛУЧШЕННАЯ ПРОВЕРКА ---
// Если 'conditions' или 'conditions.sections' отсутствуют или 'sections' не является массивом,
// компонент просто ничего не будет рендерить, чтобы избежать ошибок.
if (!conditions || !Array.isArray(conditions.sections)) {
  return null;
}
---

<section class="conditions-section">
  <h2>{conditions.title || 'Что нужно знать'}</h2>
  {conditions.subtitle && <p class="subtitle">{conditions.subtitle}</p>}

  <div class="conditions-grid">
    {conditions.sections.map(section => (
      // Проверяем, что 'section' и 'section.items' существуют
      section && Array.isArray(section.items) && (
        <div class="condition-category">
          <h3>{section.title}</h3>
          <ul>
            {section.items.map(item => (
              // Проверяем, что 'item' и 'item.icon' существуют
              item && item.icon && (
                <li>
                  <Icon name={item.icon} />
                  <div class="item-text">
                    <strong>{item.label}</strong>
                    {item.value && <span>{item.value}</span>}
                  </div>
                </li>
              )
            ))}
          </ul>
          {section.footnote && <p class="footnote">{section.footnote}</p>}
        </div>
      )
    ))}
  </div>
</section>

<style>
  /* Стили остаются без изменений */
  .conditions-section { margin-top: 2rem; }
  .conditions-section h2 { font-size: 1.5rem; margin-bottom: 0.5rem; border-bottom: 1px solid #e0e0e0; padding-bottom: 0.5rem; }
  .subtitle { color: #6c757d; margin-bottom: 2rem; }
  .conditions-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; }
  .condition-category h3 { font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem; }
  .condition-category ul { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 1rem; }
  .condition-category li { display: flex; align-items: flex-start; gap: 1rem; }
  .condition-category [astro-icon] { font-size: 1.5rem; color: #333; margin-top: 0.1em; flex-shrink: 0; }
  .item-text { display: flex; flex-direction: column; }
  .item-text strong { font-weight: 500; }
  .item-text span { font-size: 0.9rem; color: #6c757d; }
  .footnote { font-size: 0.85rem; color: #6c757d; margin-top: 1rem; }
</style>